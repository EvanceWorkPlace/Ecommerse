{% extends 'base.html' %}
{% block content %}

<!-- Orders Dashboard Section -->
<section class="py-5 fade-in" style="background: linear-gradient(135deg, #ffffff, #fafafa);">
  <div class="container">
    <div class="text-center mb-5">
      <h2 class="fw-bold text-rose">Orders Dashboard</h2>
      <p class="text-muted">Manage and track all customer orders with ease.</p>
      <hr class="w-25 mx-auto border-2 border-dark">
    </div>

    <!-- Dashboard Cards -->
    <div class="row g-4 justify-content-center">
      <!-- Total Orders -->
      <div class="col-md-4">
        <div class="card shadow-lg border-0 rounded-4 dashboard-card fade-up text-center">
          <div class="card-body py-4">
            <h5 class="fw-bold text-dark">Total Orders</h5>
            <h2 class="fw-bold text-rose mb-3">{{ total_orders }}</h2>
            <a href="" class="btn btn-outline-dark rounded-pill px-4">
              View All
            </a>
          </div>
        </div>
      </div>

      <!-- Not Shipped -->
      <div class="col-md-4">
        <div class="card shadow-lg border-0 rounded-4 dashboard-card fade-up text-center">
          <div class="card-body py-4">
            <h5 class="fw-bold text-dark">Pending Shipments</h5>
            <h2 class="fw-bold text-warning mb-3">{{ not_shipped_count }}</h2>
            <a href="{% url 'not_shipped_dash' %}" class="btn btn-rose rounded-pill px-4">
              View Pending
            </a>
          </div>
        </div>
      </div>

      <!-- Shipped Orders -->
      <div class="col-md-4">
        <div class="card shadow-lg border-0 rounded-4 dashboard-card fade-up text-center">
          <div class="card-body py-4">
            <h5 class="fw-bold text-dark">Shipped Orders</h5>
            <h2 class="fw-bold text-success mb-3">{{ shipped_count }}</h2>
            <a href="{% url 'shipped_dash' %}" class="btn btn-outline-rose rounded-pill px-4">
              View Shipped
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Access Table -->
    <div class="mt-5">
      <div class="text-center mb-3">
        <h4 class="fw-bold text-dark">Recent Orders</h4>
        <p class="text-muted">A snapshot of your latest activity</p>
      </div>

      <div class="table-responsive shadow-sm rounded-4 bg-white">
        <table class="table table-hover align-middle mb-0">
          <thead class="bg-dark text-white">
            <tr>
              <th scope="col">Order ID</th>
              <th scope="col">Customer</th>
              <th scope="col">Amount</th>
              <th scope="col">Status</th>
              <th scope="col">Date</th>
            </tr>
          </thead>
          <tbody>
            {% for order in recent_orders %}
            <tr>
              <td>
                <a href="{% url 'orders' order.id %}" class="text-decoration-none fw-semibold text-dark">
                  #{{ order.id }}
                </a>
              </td>
              <td>{{ order.full_name }}</td>
              <td>R {{ order.amount_paid }}</td>
              <td>
                {% if order.shipped %}
                  <span class="badge bg-success rounded-pill">Shipped</span>
                {% else %}
                  <span class="badge bg-warning text-dark rounded-pill">Pending</span>
                {% endif %}
              </td>
              <td>{{ order.date_ordered }}</td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5" class="text-center text-muted py-3">
                No recent orders found.
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

  </div>
</section>

<!-- Custom Styling -->
<style>
  .text-rose { color: #e91e63; }

  .btn-rose {
    background: linear-gradient(135deg, #e91e63, #000000);
    color: #fff;
    border: none;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  .btn-rose:hover {
    background: linear-gradient(135deg, #000000, #e91e63);
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(233, 30, 99, 0.25);
  }

  .btn-outline-rose {
    border: 2px solid #e91e63;
    color: #e91e63;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  .btn-outline-rose:hover {
    background-color: #e91e63;
    color: #fff;
    transform: scale(1.05);
  }

  .dashboard-card {
    transition: all 0.3s ease;
  }
  .dashboard-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 8px 20px rgba(233, 30, 99, 0.2);
  }

  .fade-in {
    animation: fadeIn 1s ease-in-out;
  }
  .fade-up {
    animation: fadeUp 1.2s ease-in-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(40px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .table-hover tbody tr:hover {
    background-color: rgba(233, 30, 99, 0.05);
  }

  a.text-decoration-none:hover {
    color: #e91e63;
  }
</style>

{% endblock %}
