{% extends 'base.html' %}

{% block content %}

<!-- Order Details Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">

                <div class="card shadow-sm rounded-4 border-0">
                    <div class="card-header bg-dark text-white fw-bold rounded-top-4">
                        Order {{ order.id }} - R{{ order.amount_paid }}
                    </div>

                    <div class="card-body">
                        <p class="mb-1"><strong>Email:</strong> {{ order.email }}</p>
                        {% if order.date_shipped %}
                            <p class="mb-1"><strong>Date Shipped:</strong> {{ order.date_shipped }}</p>
                        {% else %}
                            <p class="mb-1"><strong>Date Ordered:</strong> {{ order.date_ordered }}</p>
                        {% endif %}
                        <p class="mb-1"><strong>Name:</strong> {{ order.full_name }}</p>
                        <p class="mb-1"><strong>Shipping Address:</strong></p>
                        <pre class="ms-3">{{ order.shipping_address }}</pre>

                        <hr>

                        <h5 class="fw-bold mb-3">Items</h5>
                        <ul class="list-group mb-4">
                            {% for item in items %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    {{ item.product }} (x{{ item.Quantity }})
                                    <span class="fw-bold">R {{ item.price }}</span>
                                </li>
                            {% endfor %}
                        </ul>

                        <!-- Shipping Action -->
                        {% if not order.shipped %}
                        <form method="POST" class="d-inline-block">
                            {% csrf_token %}
                            <input type="hidden" name="shipping_status" value="true">
                            <button type="submit" class="btn btn-success shadow-sm">Mark As Shipped</button>
                        </form>
                        {% else %}
                        <form method="POST" class="d-inline-block">
                            {% csrf_token %}
                            <input type="hidden" name="shipping_status" value="false">
                            <button type="submit" class="btn btn-danger shadow-sm">Mark As Not Shipped</button>
                        </form>
                        {% endif %}
                    </div>

                    <div class="card-footer text-center text-muted rounded-bottom-4">
                        Thank you for supporting MrTrackShop
                    </div>
                </div>

                <div class="text-center mt-4">
                    <a href="{% url 'not_shipped_dash' %}" class="btn btn-outline-dark shadow-sm">
                        ‚Üê Back to Orders
                    </a>
                </div>

            </div>
        </div>
    </div>
</section>

<!-- Custom Styling -->
<style>
    pre {
        background-color: #f8f9fa;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        font-family: 'Segoe UI', sans-serif;
    }

    .btn-success:hover {
        background-color: #198754;
        transform: translateY(-1px);
    }

    .btn-danger:hover {
        background-color: #dc3545;
        transform: translateY(-1px);
    }

    .list-group-item {
        border-radius: 0.5rem;
        transition: all 0.2s ease;
    }

    .list-group-item:hover {
        background-color: rgba(13, 110, 253, 0.05);
    }
</style>

{% endblock %}
