{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Header -->
<header class="py-5 shadow-sm" style="background: linear-gradient(135deg, #007bff, #00b894);">
  <div class="container px-4 px-lg-3 my-5">
    <div class="text-center text-white">
      <h1 class="display-6 fw-bold">{{ categories }}</h1>
      <p class="lead fw-normal text-white-50 mb-0">Explore trusted medicines and healthcare products in this category.</p>
    </div>
  </div>
</header>

<!-- Product Section -->
<section class="py-5">
  <div class="container px-4 px-lg-5 mt-4">
    {% if products %}
    <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
      {% for product in products %}
      <div class="col mb-5">
        <div class="card h-100 product-card border-0 shadow-sm">
          
          <!-- Sale Badge -->
          {% if product.is_sale %}
          <div class="badge bg-danger position-absolute top-0 end-0 m-2 shadow-sm">Sale</div>
          {% endif %}

          <!-- Product Image -->
          <img class="card-img-top product-img" src="{{ product.image.url }}" alt="{{ product.name }}">

          <!-- Product Details -->
          <div class="card-body p-4 text-center">
            <h5 class="fw-semibold text-dark mb-2">{{ product.name }}</h5>

            {% if product.is_sale %}
            <p class="mb-0">
              <span class="text-muted text-decoration-line-through">R {{ product.price }}</span>
              <span class="text-danger fw-bold"> R {{ product.sale_price }}</span>
            </p>
            {% else %}
            <p class="fw-bold text-success mb-0">R {{ product.price }}</p>
            {% endif %}

            <small class="text-muted d-block mt-2">{{ product.description|truncatechars:60 }}</small>
          </div>

          <!-- Product Actions -->
          <div class="card-footer p-3 pt-0 border-top-0 bg-transparent text-center">
            <a class="btn btn-primary rounded-pill mt-auto px-4 shadow-sm" href="{% url 'product' product.id %}">
              <i class="bi bi-bag-check"></i> Buy Item
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="text-center text-muted py-5">
      <i class="bi bi-clipboard-x fs-3 mb-3"></i>
      <p>No products available in this category yet.</p>
    </div>
    {% endif %}
  </div>
</section>

<!-- Page Styles -->
<style>
  /* Product Card */
  .product-card {
    border-radius: 12px;
    transition: all 0.3s ease;
    overflow: hidden;
    background-color: #fff;
  }

  .product-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }

  /* Product Image */
  .product-img {
    height: 230px;
    object-fit: cover;
    transition: transform 0.4s ease;
  }

  .product-card:hover .product-img {
    transform: scale(1.05);
  }

  /* Buttons */
  .btn-primary {
    background: linear-gradient(135deg, #007bff, #00b894);
    border: none;
    transition: background 0.3s ease, transform 0.2s ease;
  }

  .btn-primary:hover {
    background: linear-gradient(135deg, #00b894, #007bff);
    transform: scale(1.05);
  }

  /* Sale Badge */
  .badge {
    font-size: 0.8rem;
    border-radius: 50px;
    padding: 0.4rem 0.8rem;
  }
</style>

{% endblock %}
